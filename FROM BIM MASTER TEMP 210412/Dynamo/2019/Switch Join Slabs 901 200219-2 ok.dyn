<Workspace Version="0.9.1.4062" X="423.194450146025" Y="215.611589953919" zoom="0.199873782916068" Name="Home" Description="" RunType="Manual" RunPeriod="1000" HasRunWithoutCrash="True">
  <NamespaceResolutionMap />
  <Elements>
    <Dynamo.Nodes.DSModelElementsSelection guid="76174942-e10c-4df3-99ce-487bd92ab0fb" type="Dynamo.Nodes.DSModelElementsSelection" nickname="Select Model Elements" x="-1223.19790950517" y="1006.07477608404" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="True" IsFrozen="false">
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d875" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d877" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d879" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d87b" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d87d" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d87f" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d881" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d883" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d885" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d887" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d889" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d88b" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d88d" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d88f" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d891" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004d893" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dae8" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daea" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daec" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daee" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daf0" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daf2" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daf4" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daf6" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004daf8" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dafa" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dafc" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dafe" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004db00" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004db02" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004db04" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004db06" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd1f" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd22" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd24" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd26" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd28" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd2a" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd2c" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd2e" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd30" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd32" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd34" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd36" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd38" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd3a" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd3c" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd3e" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd40" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd42" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd44" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd46" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd48" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd4a" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd4c" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004dd4e" />
      <instance id="c91ef0f3-39ef-4c4e-91d7-c370b739f381-0004e071" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e278" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e27a" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e27c" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e27e" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e280" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e282" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e284" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e286" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e288" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e28a" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e28c" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e28e" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e290" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e292" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e294" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e296" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e30b" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e30e" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e310" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e312" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e314" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e316" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e318" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e31a" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e31c" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e31e" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e320" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e322" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e324" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e326" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e328" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e32a" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e32c" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e32e" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e330" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e332" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e334" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e336" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e338" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e33a" />
      <instance id="d4d81d03-9039-4a2d-b199-e1abfc3952c0-0004e391" />
    </Dynamo.Nodes.DSModelElementsSelection>
    <PythonNodeModels.PythonNode guid="84d0f17b-0128-4787-9b70-20929c54dd48" type="PythonNodeModels.PythonNode" nickname="Python Script" x="-434.998684337374" y="983.020302886712" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="6">
      <Script>import clr
clr.AddReference('ProtoGeometry')
from Autodesk.DesignScript.Geometry import *
clr.AddReference('RevitAPI')
from Autodesk.Revit.DB import *
clr.AddReference('RevitAPIUI')
from Autodesk.Revit.UI import TaskDialog
clr.AddReference("RevitNodes")
import Revit
clr.ImportExtensions(Revit.Elements)
clr.AddReference("RevitServices")
import RevitServices
from RevitServices.Persistence import DocumentManager
from RevitServices.Transactions import TransactionManager
from System.Collections.Generic import *
clr.ImportExtensions(Revit.GeometryConversion)
 
doc = DocumentManager.Instance.CurrentDBDocument
uiapp = DocumentManager.Instance.CurrentUIApplication
app = uiapp.Application
 
import sys
import System
import Autodesk.Revit.DB.JoinGeometryUtils as JGU # de Join

#The inputs to this node will be stored as a list in the IN variables.
dataEnteringNode = IN

elems = UnwrapElement(IN[0])
f=IN[1]
c=IN[2]
w=IN[3]
fr=IN[4]
fl=IN[5]


FD=[]
SC=[]
SW=[]
SFR=[]
SFL=[]

res = []

for e in elems:
	if e.Category.Name == f:
		FD.append(e)
	elif e.Category.Name == c:
		SC.append(e)
	elif e.Category.Name == w:
		SW.append(e)
	elif e.Category.Name == fr:
		SFR.append(e)
	elif e.Category.Name == fl:
		SFL.append(e)
	else:
		res.append(e)

#Assign your output to the OUT variable.
OUT = FD,SC,SW,SFR,SFL,res</Script>
    </PythonNodeModels.PythonNode>
    <Dynamo.Graph.Nodes.CodeBlockNodeModel guid="d89174a4-826d-48c8-b5d8-2789f676977d" type="Dynamo.Graph.Nodes.CodeBlockNodeModel" nickname="Code Block" x="-825.160881695474" y="1100.83026559053" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" CodeText="&quot;Structural Foundations&quot;;&#xA;&quot;Structural Columns&quot;;&#xA;&quot;Walls&quot;;&#xA;&quot;Structural Framing&quot;;&#xA;&quot;Floors&quot;;" ShouldFocus="false" />
    <Dynamo.Graph.Nodes.CodeBlockNodeModel guid="d1e55bab-f759-4b13-9952-f28ffc5213af" type="Dynamo.Graph.Nodes.CodeBlockNodeModel" nickname="Code Block" x="-210.998684337374" y="987.233636220045" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" CodeText="elemList;&#xA;foundations = elemList[0];&#xA;columns = elemList[1];&#xA;walls = elemList[2];&#xA;framings = elemList[3];&#xA;floors = elemList[4];" ShouldFocus="false" />
    <CoreNodeModels.Input.StringInput guid="12e822b9-9224-44bb-9b06-0ef49e193a2d" type="CoreNodeModels.Input.StringInput" nickname="String" x="549.353196514277" y="1536.25004160367" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="True" IsFrozen="false">
      <System.String>import clr
clr.AddReference('ProtoGeometry')
from Autodesk.DesignScript.Geometry import *
clr.AddReference('RevitAPI')
from Autodesk.Revit.DB import *
clr.AddReference('RevitAPIUI')
from Autodesk.Revit.UI import TaskDialog
clr.AddReference("RevitNodes")
import Revit
clr.ImportExtensions(Revit.Elements)
clr.AddReference("RevitServices")
import RevitServices
from RevitServices.Persistence import DocumentManager
from RevitServices.Transactions import TransactionManager
from System.Collections.Generic import *
clr.ImportExtensions(Revit.GeometryConversion)
 
doc = DocumentManager.Instance.CurrentDBDocument
uiapp = DocumentManager.Instance.CurrentUIApplication
app = uiapp.Application
 
import sys
import System

import Autodesk.Revit.DB.JoinGeometryUtils as JGU
#The inputs to this node will be stored as a list in the IN variables.
dataEnteringNode = IN

elems = UnwrapElement(IN[0])
res = []

finRes = []

if not len(elems) == 0:
	for e in elems:
		je = JGU.GetJoinedElements(doc,e)
		ees = []
		for id in je:
			ee = doc.GetElement(id)
			ees.append(ee)			
		res.append(ees)
	finRes.append(elems)
	finRes.append(res)
else:
	finRes = 0

#Assign your output to the OUT variable.
OUT = finRes</System.String>
      <System.String value="import clr&#xD;&#xA;clr.AddReference('ProtoGeometry')&#xD;&#xA;from Autodesk.DesignScript.Geometry import *&#xD;&#xA;clr.AddReference('RevitAPI')&#xD;&#xA;from Autodesk.Revit.DB import *&#xD;&#xA;clr.AddReference('RevitAPIUI')&#xD;&#xA;from Autodesk.Revit.UI import TaskDialog&#xD;&#xA;clr.AddReference(&quot;RevitNodes&quot;)&#xD;&#xA;import Revit&#xD;&#xA;clr.ImportExtensions(Revit.Elements)&#xD;&#xA;clr.AddReference(&quot;RevitServices&quot;)&#xD;&#xA;import RevitServices&#xD;&#xA;from RevitServices.Persistence import DocumentManager&#xD;&#xA;from RevitServices.Transactions import TransactionManager&#xD;&#xA;from System.Collections.Generic import *&#xD;&#xA;clr.ImportExtensions(Revit.GeometryConversion)&#xD;&#xA; &#xD;&#xA;doc = DocumentManager.Instance.CurrentDBDocument&#xD;&#xA;uiapp = DocumentManager.Instance.CurrentUIApplication&#xD;&#xA;app = uiapp.Application&#xD;&#xA; &#xD;&#xA;import sys&#xD;&#xA;import System&#xD;&#xA;&#xD;&#xA;import Autodesk.Revit.DB.JoinGeometryUtils as JGU&#xD;&#xA;#The inputs to this node will be stored as a list in the IN variables.&#xD;&#xA;dataEnteringNode = IN&#xD;&#xA;&#xD;&#xA;elems = UnwrapElement(IN[0])&#xD;&#xA;res = []&#xD;&#xA;&#xD;&#xA;finRes = []&#xD;&#xA;&#xD;&#xA;if not len(elems) == 0:&#xD;&#xA;	for e in elems:&#xD;&#xA;		je = JGU.GetJoinedElements(doc,e)&#xD;&#xA;		ees = []&#xD;&#xA;		for id in je:&#xD;&#xA;			ee = doc.GetElement(id)&#xD;&#xA;			ees.append(ee)			&#xD;&#xA;		res.append(ees)&#xD;&#xA;	finRes.append(elems)&#xD;&#xA;	finRes.append(res)&#xD;&#xA;else:&#xD;&#xA;	finRes = 0&#xD;&#xA;&#xD;&#xA;#Assign your output to the OUT variable.&#xD;&#xA;OUT = finRes" />
    </CoreNodeModels.Input.StringInput>
    <PythonNodeModels.PythonStringNode guid="ec98ddf9-5468-4105-9f90-5b009d5aca34" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="962.880250725857" y="959.543464079155" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <PythonNodeModels.PythonStringNode guid="526e9385-ac6b-415b-bb41-21ee41429689" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="962.880250725857" y="1075.1013567128" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <PythonNodeModels.PythonStringNode guid="49be1c27-7f2d-47d0-baa8-edfb3b76398c" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="962.880250725857" y="1184.34157390326" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <PythonNodeModels.PythonStringNode guid="2b0f8bc2-39a2-4ea4-a2df-d72a86d2b8c4" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="962.880250725857" y="1302.37330528257" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <PythonNodeModels.PythonStringNode guid="5e96acc3-0505-405a-8607-4703449f3f77" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="962.880250725857" y="1409.50763065863" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <Dynamo.Graph.Nodes.ZeroTouch.DSFunction guid="e269c649-36be-4e5b-8dcc-f169973cf78e" type="Dynamo.Graph.Nodes.ZeroTouch.DSFunction" nickname="List.Transpose" x="1284.21435573421" y="1444.61219631764" isVisible="true" isUpstreamVisible="true" lacing="Shortest" isSelectedInput="False" IsFrozen="false" assembly="DSCoreNodes.dll" function="DSCore.List.Transpose@var[]..[]" />
    <CoreNodeModels.Input.StringInput guid="1c805efe-a97f-436b-a4d7-88bd0293c357" type="CoreNodeModels.Input.StringInput" nickname="nếu Empty thì loại bỏ" x="977.358152838002" y="1707.943017373" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="True" IsFrozen="false">
      <System.String>import clr
clr.AddReference('ProtoGeometry')
from Autodesk.DesignScript.Geometry import *
#The inputs to this node will be stored as a list in the IN variables.
dataEnteringNode = IN
list = IN[0]
res = []
for l in list:
	e = l[0]
	je = l[1]	
	if len(je) == 0:
		res.append(l)
		list.remove(l)
#Assign your output to the OUT variable.
OUT = list#,res</System.String>
      <System.String value="import clr&#xD;&#xA;clr.AddReference('ProtoGeometry')&#xD;&#xA;from Autodesk.DesignScript.Geometry import *&#xD;&#xA;#The inputs to this node will be stored as a list in the IN variables.&#xD;&#xA;dataEnteringNode = IN&#xD;&#xA;list = IN[0]&#xD;&#xA;res = []&#xD;&#xA;for l in list:&#xD;&#xA;	e = l[0]&#xD;&#xA;	je = l[1]	&#xD;&#xA;	if len(je) == 0:&#xD;&#xA;		res.append(l)&#xD;&#xA;		list.remove(l)&#xD;&#xA;#Assign your output to the OUT variable.&#xD;&#xA;OUT = list#,res" />
    </CoreNodeModels.Input.StringInput>
    <PythonNodeModels.PythonStringNode guid="4ee25f8c-5ce4-48e5-bb1c-c68baf94da19" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="1449.97259747212" y="1421.61924355145" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <PythonNodeModels.PythonStringNode guid="5d4c1b3e-8d69-43bf-86f5-3640c761f853" type="PythonNodeModels.PythonStringNode" nickname="Python Script From String" x="1719.80570903697" y="1413.78642588181" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="False" IsFrozen="false" inputcount="2" />
    <CoreNodeModels.Input.StringInput guid="ccce846f-745b-40b6-bd80-7e09c30f6cc5" type="CoreNodeModels.Input.StringInput" nickname="nếu Cut thì Switch Join" x="1429.6572790501" y="1697.18358863332" isVisible="true" isUpstreamVisible="true" lacing="Disabled" isSelectedInput="True" IsFrozen="false">
      <System.String>import clr
clr.AddReference('ProtoGeometry')
from Autodesk.DesignScript.Geometry import *
clr.AddReference('RevitAPI')
from Autodesk.Revit.DB import *
clr.AddReference('RevitAPIUI')
from Autodesk.Revit.UI import TaskDialog
clr.AddReference("RevitNodes")
import Revit
clr.ImportExtensions(Revit.Elements)
clr.AddReference("RevitServices")
import RevitServices
from RevitServices.Persistence import DocumentManager
from RevitServices.Transactions import TransactionManager
from System.Collections.Generic import *
clr.ImportExtensions(Revit.GeometryConversion)
 
doc = DocumentManager.Instance.CurrentDBDocument
uiapp = DocumentManager.Instance.CurrentUIApplication
app = uiapp.Application
 
import sys
import System
import Autodesk.Revit.DB.JoinGeometryUtils as JGU # de Join 

#The inputs to this node will be stored as a list in the IN variables.
dataEnteringNode = IN

list = IN[0]

res = []

# Start Transaction
TransactionManager.Instance.EnsureInTransaction(doc)
try:
	for l in list:
		A = UnwrapElement(l[0])
		jes = l[1]
		
		for j in jes:
			B = UnwrapElement(j)
			boolCut = JGU.IsCuttingElementInJoin(doc,A,B)
			if boolCut == True:
				JGU.SwitchJoinOrder(doc,B,A)
except:
    pass
 
# End Transaction
TransactionManager.Instance.TransactionTaskDone()
doc.Regenerate()

#Assign your output to the OUT variable.
OUT = list</System.String>
      <System.String value="import clr&#xD;&#xA;clr.AddReference('ProtoGeometry')&#xD;&#xA;from Autodesk.DesignScript.Geometry import *&#xD;&#xA;clr.AddReference('RevitAPI')&#xD;&#xA;from Autodesk.Revit.DB import *&#xD;&#xA;clr.AddReference('RevitAPIUI')&#xD;&#xA;from Autodesk.Revit.UI import TaskDialog&#xD;&#xA;clr.AddReference(&quot;RevitNodes&quot;)&#xD;&#xA;import Revit&#xD;&#xA;clr.ImportExtensions(Revit.Elements)&#xD;&#xA;clr.AddReference(&quot;RevitServices&quot;)&#xD;&#xA;import RevitServices&#xD;&#xA;from RevitServices.Persistence import DocumentManager&#xD;&#xA;from RevitServices.Transactions import TransactionManager&#xD;&#xA;from System.Collections.Generic import *&#xD;&#xA;clr.ImportExtensions(Revit.GeometryConversion)&#xD;&#xA; &#xD;&#xA;doc = DocumentManager.Instance.CurrentDBDocument&#xD;&#xA;uiapp = DocumentManager.Instance.CurrentUIApplication&#xD;&#xA;app = uiapp.Application&#xD;&#xA; &#xD;&#xA;import sys&#xD;&#xA;import System&#xD;&#xA;import Autodesk.Revit.DB.JoinGeometryUtils as JGU # de Join &#xD;&#xA;&#xD;&#xA;#The inputs to this node will be stored as a list in the IN variables.&#xD;&#xA;dataEnteringNode = IN&#xD;&#xA;&#xD;&#xA;list = IN[0]&#xD;&#xA;&#xD;&#xA;res = []&#xD;&#xA;&#xD;&#xA;# Start Transaction&#xD;&#xA;TransactionManager.Instance.EnsureInTransaction(doc)&#xD;&#xA;try:&#xD;&#xA;	for l in list:&#xD;&#xA;		A = UnwrapElement(l[0])&#xD;&#xA;		jes = l[1]&#xD;&#xA;		&#xD;&#xA;		for j in jes:&#xD;&#xA;			B = UnwrapElement(j)&#xD;&#xA;			boolCut = JGU.IsCuttingElementInJoin(doc,A,B)&#xD;&#xA;			if boolCut == True:&#xD;&#xA;				JGU.SwitchJoinOrder(doc,B,A)&#xD;&#xA;except:&#xD;&#xA;    pass&#xD;&#xA; &#xD;&#xA;# End Transaction&#xD;&#xA;TransactionManager.Instance.TransactionTaskDone()&#xD;&#xA;doc.Regenerate()&#xD;&#xA;&#xD;&#xA;#Assign your output to the OUT variable.&#xD;&#xA;OUT = list" />
    </CoreNodeModels.Input.StringInput>
  </Elements>
  <Connectors>
    <Dynamo.Graph.Connectors.ConnectorModel start="76174942-e10c-4df3-99ce-487bd92ab0fb" start_index="0" end="84d0f17b-0128-4787-9b70-20929c54dd48" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="84d0f17b-0128-4787-9b70-20929c54dd48" start_index="0" end="d1e55bab-f759-4b13-9952-f28ffc5213af" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d89174a4-826d-48c8-b5d8-2789f676977d" start_index="0" end="84d0f17b-0128-4787-9b70-20929c54dd48" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d89174a4-826d-48c8-b5d8-2789f676977d" start_index="1" end="84d0f17b-0128-4787-9b70-20929c54dd48" end_index="2" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d89174a4-826d-48c8-b5d8-2789f676977d" start_index="2" end="84d0f17b-0128-4787-9b70-20929c54dd48" end_index="3" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d89174a4-826d-48c8-b5d8-2789f676977d" start_index="3" end="84d0f17b-0128-4787-9b70-20929c54dd48" end_index="4" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d89174a4-826d-48c8-b5d8-2789f676977d" start_index="4" end="84d0f17b-0128-4787-9b70-20929c54dd48" end_index="5" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d1e55bab-f759-4b13-9952-f28ffc5213af" start_index="1" end="ec98ddf9-5468-4105-9f90-5b009d5aca34" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d1e55bab-f759-4b13-9952-f28ffc5213af" start_index="2" end="526e9385-ac6b-415b-bb41-21ee41429689" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d1e55bab-f759-4b13-9952-f28ffc5213af" start_index="3" end="49be1c27-7f2d-47d0-baa8-edfb3b76398c" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d1e55bab-f759-4b13-9952-f28ffc5213af" start_index="4" end="2b0f8bc2-39a2-4ea4-a2df-d72a86d2b8c4" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="d1e55bab-f759-4b13-9952-f28ffc5213af" start_index="5" end="5e96acc3-0505-405a-8607-4703449f3f77" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="12e822b9-9224-44bb-9b06-0ef49e193a2d" start_index="0" end="ec98ddf9-5468-4105-9f90-5b009d5aca34" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="12e822b9-9224-44bb-9b06-0ef49e193a2d" start_index="0" end="526e9385-ac6b-415b-bb41-21ee41429689" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="12e822b9-9224-44bb-9b06-0ef49e193a2d" start_index="0" end="49be1c27-7f2d-47d0-baa8-edfb3b76398c" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="12e822b9-9224-44bb-9b06-0ef49e193a2d" start_index="0" end="2b0f8bc2-39a2-4ea4-a2df-d72a86d2b8c4" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="12e822b9-9224-44bb-9b06-0ef49e193a2d" start_index="0" end="5e96acc3-0505-405a-8607-4703449f3f77" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="5e96acc3-0505-405a-8607-4703449f3f77" start_index="0" end="e269c649-36be-4e5b-8dcc-f169973cf78e" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="e269c649-36be-4e5b-8dcc-f169973cf78e" start_index="0" end="4ee25f8c-5ce4-48e5-bb1c-c68baf94da19" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="1c805efe-a97f-436b-a4d7-88bd0293c357" start_index="0" end="4ee25f8c-5ce4-48e5-bb1c-c68baf94da19" end_index="0" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="4ee25f8c-5ce4-48e5-bb1c-c68baf94da19" start_index="0" end="5d4c1b3e-8d69-43bf-86f5-3640c761f853" end_index="1" portType="0" />
    <Dynamo.Graph.Connectors.ConnectorModel start="ccce846f-745b-40b6-bd80-7e09c30f6cc5" start_index="0" end="5d4c1b3e-8d69-43bf-86f5-3640c761f853" end_index="0" portType="0" />
  </Connectors>
  <Notes>
    <Dynamo.Graph.Notes.NoteModel guid="c97caff0-a5eb-4899-a5da-a476bfa41481" text="[0] Chọn toàn bộ các Cấu kiện KC theo Tầng" x="-1218.2938994557" y="958.128673755515" />
    <Dynamo.Graph.Notes.NoteModel guid="13e2b804-5005-47a5-bcc9-2863fe179e72" text="Tìm các cá thể join với đối tượng lọc" x="974.288401182622" y="866.701092112792" />
    <Dynamo.Graph.Notes.NoteModel guid="ddba84cc-e4df-486f-8aa5-db6a9ec0dcf0" text="Thứ tự ưu tiên JOIN;&#xD;&#xA;1. Móng&#xD;&#xA;2. Cột&#xD;&#xA;3. Tường&#xD;&#xA;4. Dầm&#xD;&#xA;5. Sàn" x="-1424.3454747363" y="987.093612615818" />
  </Notes>
  <Annotations>
    <Dynamo.Graph.Annotations.AnnotationModel guid="ba6552c6-2231-47a8-b3f3-97a9a09d2105" annotationText="Lọc theo category" left="-835.160881695474" top="953.020302886712" width="948.1621973581" height="304.809962703818" fontSize="14" InitialTop="983.020302886712" InitialHeight="253" TextblockHeight="20" backgrouund="#FFC1D676">
      <Models ModelGuid="84d0f17b-0128-4787-9b70-20929c54dd48" />
      <Models ModelGuid="d89174a4-826d-48c8-b5d8-2789f676977d" />
      <Models ModelGuid="d1e55bab-f759-4b13-9952-f28ffc5213af" />
    </Dynamo.Graph.Annotations.AnnotationModel>
    <Dynamo.Graph.Annotations.AnnotationModel guid="a661e5c3-c250-4de8-ab89-485d3efa6d08" annotationText="&lt;Click here to edit the group title&gt;" left="-1233.19790950517" top="928.128673755515" width="289" height="253.946102328525" fontSize="14" InitialTop="958.128673755515" InitialHeight="206.6" TextblockHeight="20" backgrouund="#FFFFAA45">
      <Models ModelGuid="76174942-e10c-4df3-99ce-487bd92ab0fb" />
      <Models ModelGuid="c97caff0-a5eb-4899-a5da-a476bfa41481" />
    </Dynamo.Graph.Annotations.AnnotationModel>
    <Dynamo.Graph.Annotations.AnnotationModel guid="45014bd0-5f7d-4d9a-9bb1-aa8ea0de5ee5" annotationText="Switch Join process for Floors" left="1274.21435573421" top="1383.78642588181" width="626.59135330276" height="153.82577043583" fontSize="14" InitialTop="1413.78642588181" InitialHeight="153.42577043583" TextblockHeight="20" backgrouund="#FFC1D676">
      <Models ModelGuid="e269c649-36be-4e5b-8dcc-f169973cf78e" />
      <Models ModelGuid="4ee25f8c-5ce4-48e5-bb1c-c68baf94da19" />
      <Models ModelGuid="5d4c1b3e-8d69-43bf-86f5-3640c761f853" />
    </Dynamo.Graph.Annotations.AnnotationModel>
  </Annotations>
  <Presets />
  <Cameras>
    <Camera Name="Background Preview" eyeX="-17" eyeY="24" eyeZ="50" lookX="12" lookY="-13" lookZ="-58" upX="0" upY="1" upZ="0" />
  </Cameras>
</Workspace>